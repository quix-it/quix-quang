import{d as a}from"./chunk-3QJG2MAB.js";import{c as q,h as C}from"./chunk-IBUDHHDL.js";import"./chunk-C677ZBML.js";import{n as H,o as I,u as p}from"./chunk-MCYERT77.js";import{$a as c,Db as s,Eb as r,Ha as w,I as y,Mb as m,Wb as o,Xb as E,Za as v,cc as _,eb as h,gc as V,hc as x,jb as S,ka as t,lb as u,nc as d,ob as k,q as D,uc as f,vb as A,w as T}from"./chunk-P6LZ7ZJJ.js";var L=(()=>{class e{constructor(){this.logLevel=t(C,{optional:!0}),this.targetRoles=w.required({alias:"quangHasAtLeastOneRole"}),this.viewContainerRef=t(h),this.embeddedViewRef=null,this.templateRef=t(c),this.authService=t(a),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.hideViewIfNotAllowed=f(()=>{this.logLevel==="verbose"&&console.debug({userRoles:this.authService.roles(),rolesToCheck:this.targetRoles()}),this.authService.hasAtLeastOneRole(this.targetRoles())?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangHasAtLeastOneRole",""]],inputs:{targetRoles:[1,"quangHasAtLeastOneRole","targetRoles"]}})}}return e})();var Q=(()=>{class e{constructor(){this.logLevel=t(C,{optional:!0}),this.targetRoles=w.required({alias:"quangHasEveryRole"}),this.viewContainerRef=t(h),this.embeddedViewRef=null,this.templateRef=t(c),this.authService=t(a),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.hideViewIfNotAllowed=f(()=>{this.logLevel==="verbose"&&console.debug({userRoles:this.authService.roles(),rolesToCheck:this.targetRoles()}),this.authService.hasEveryRole(this.targetRoles())?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangHasEveryRole",""]],inputs:{targetRoles:[1,"quangHasEveryRole","targetRoles"]}})}}return e})();var O=(()=>{class e{constructor(){this.viewContainerRef=t(h),this.templateRef=t(c),this.embeddedViewRef=null,this.authService=t(a),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.hideViewIfNotAuthenticated=f(()=>{this.authService.isAuthenticated()?this.embeddedViewRef||this.viewContainerRef.createEmbeddedView(this.templateRef):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangIsAuthenticated",""]]})}}return e})();var F=(()=>{class e{constructor(){this.viewContainerRef=t(h),this.templateRef=t(c),this.embeddedViewRef=null,this.authService=t(a),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.showViewIfNotAuthenticated=f(()=>{this.authService.isAuthenticated()?(this.viewContainerRef.clear(),this.embeddedViewRef=null):this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangIsNotAuthenticated",""]]})}}return e})();var G=()=>["test1"],P=()=>["test2"],N=()=>["test1","test2"];function j(e,g){e&1&&(s(0,"h1"),o(1,"Is Auth"),r())}function M(e,g){e&1&&(s(0,"h1"),o(1,"Is not Auth"),r())}function B(e,g){e&1&&(s(0,"h2"),o(1,"Has test1 role"),r())}function $(e,g){e&1&&(s(0,"h2"),o(1,"Has test2 role"),r())}function J(e,g){e&1&&(s(0,"h2"),o(1,"Has test1 and test2"),r())}function z(e,g){e&1&&(s(0,"h2"),o(1,"Has test1 or test2 role"),r())}var U=(()=>{class e{constructor(){this.http=t(q),this.authService=t(a),this.checkRole=this.authService.roles,this.user=this.authService.user}getProtectedApiResponse(){this.http.get("https://demo.duendesoftware.com/api/test").pipe(T(i=>i.find(n=>n.type==="iss").value),T(i=>`\u2601 API Success from ${i}`),y(i=>D(`\u{1F329} API Error: ${i.status} ${i.statusText}`))).subscribe(i=>{console.log(i)})}editRoles(i,n){i==="add"&&this.authService.addRoles([n]),i==="remove"&&this.authService.removeRoles([n])}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=S({type:e,selectors:[["playground-auth-test"]],decls:25,vars:11,consts:[[4,"quangIsAuthenticated"],[4,"quangIsNotAuthenticated"],[4,"quangHasAtLeastOneRole"],[4,"quangHasEveryRole"],[1,"d-flex","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"user-info"]],template:function(n,l){n&1&&(k(0,j,2,0,"h1",0)(1,M,2,0,"h1",1)(2,B,2,0,"h2",2)(3,$,2,0,"h2",3)(4,J,2,0,"h2",3)(5,z,2,0,"h2",2),s(6,"div",4)(7,"button",5),m("click",function(){return l.authService.logout()}),o(8," Logout "),r(),s(9,"button",5),m("click",function(){return l.authService.login()}),o(10," Login "),r(),s(11,"button",5),m("click",function(){return l.getProtectedApiResponse()}),o(12," Make test API call "),r(),s(13,"button",5),m("click",function(){return l.editRoles("add","test1")}),o(14," Add Test1 role "),r(),s(15,"button",5),m("click",function(){return l.editRoles("add","test2")}),o(16," Add Test2 role "),r(),s(17,"button",5),m("click",function(){return l.editRoles("remove","test1")}),o(18," Remove Test1 role "),r(),s(19,"button",5),m("click",function(){return l.editRoles("remove","test2")}),o(20," Remove Test2 role "),r()(),o(21,`
User Info:
`),s(22,"pre",6),o(23),V(24,"json"),r()),n&2&&(v(2),A("quangHasAtLeastOneRole",_(7,G)),v(),A("quangHasEveryRole",_(8,P)),v(),A("quangHasEveryRole",_(9,N)),v(),A("quangHasAtLeastOneRole",_(10,N)),v(18),E(x(24,5,l.user())))},dependencies:[I,H,O,F,L,Q],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return e})();var K=[{path:"auth",component:U},{path:"**",pathMatch:"full",redirectTo:"auth"}],Ee=K;export{Ee as default};
