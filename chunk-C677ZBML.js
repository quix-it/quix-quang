import{Ja as f,Ka as u,a as c,sc as s,tc as a}from"./chunk-P6LZ7ZJJ.js";function d(t){let n=s(()=>t());return p(n)?new Proxy(t,{get(e,o){return o in n?(f(e[o])||Object.defineProperty(e,o,{value:a(()=>e()[o]),configurable:!0}),d(e[o])):e[o]}}):t}var l=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function p(t){if(t===null||typeof t!="object"||h(t))return!1;let n=Object.getPrototypeOf(t);if(n===Object.prototype)return!0;for(;n&&n!==Object.prototype;){if(l.includes(n.constructor))return!1;n=Object.getPrototypeOf(n)}return n===Object.prototype}function h(t){return typeof t?.[Symbol.iterator]=="function"}var g=new WeakMap,r=Symbol("STATE_SOURCE");function R(t,...n){t[r].update(e=>n.reduce((o,i)=>c(c({},o),typeof i=="function"?i(o):i),e)),S(t)}function y(t){return t[r]()}function m(t){return g.get(t[r])||[]}function S(t){let n=m(t);for(let e of n){let o=s(()=>y(t));e(o)}}function x(t){let n=u(t),e=d(n.asReadonly());return Object.defineProperty(e,r,{value:n}),e}export{R as a,x as b};
