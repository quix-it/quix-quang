import{d as c}from"./chunk-OWTVRQTX.js";import{a as C}from"./chunk-JHBN74HO.js";import"./chunk-AI4CTHAB.js";import{n as F}from"./chunk-WNDDUXID.js";import{h as O}from"./chunk-B73NTX2F.js";import"./chunk-2B2EYJPR.js";import{C as p,o as q,p as L,x as Q}from"./chunk-RLR7EZVK.js";import"./chunk-W4BNGQYG.js";import{Cc as d,Hb as g,I as S,Ia as w,Ic as x,Jc as f,Pb as o,Qb as s,Rb as E,Yb as m,gc as r,hc as V,ib as R,kb as l,la as t,pb as h,q as y,rc as _,ub as D,vc as H,w as b,wb as u,wc as I,zb as k}from"./chunk-DAEZZW2A.js";var N=(()=>{class e{constructor(){this.logLevel=t(C,{optional:!0}),this.targetRoles=w.required({alias:"quangHasAtLeastOneRole"}),this.viewContainerRef=t(h),this.embeddedViewRef=null,this.templateRef=t(l),this.authService=t(c),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.hideViewIfNotAllowed=f(()=>{this.logLevel==="verbose"&&console.debug({userRoles:this.authService.roles(),rolesToCheck:this.targetRoles()}),this.authService.hasAtLeastOneRole(this.targetRoles())?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangHasAtLeastOneRole",""]],inputs:{targetRoles:[1,"quangHasAtLeastOneRole","targetRoles"]}})}}return e})();var P=(()=>{class e{constructor(){this.logLevel=t(C,{optional:!0}),this.targetRoles=w.required({alias:"quangHasEveryRole"}),this.viewContainerRef=t(h),this.embeddedViewRef=null,this.templateRef=t(l),this.authService=t(c),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.hideViewIfNotAllowed=f(()=>{this.logLevel==="verbose"&&console.debug({userRoles:this.authService.roles(),rolesToCheck:this.targetRoles()}),this.authService.hasEveryRole(this.targetRoles())?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangHasEveryRole",""]],inputs:{targetRoles:[1,"quangHasEveryRole","targetRoles"]}})}}return e})();var U=(()=>{class e{constructor(){this.viewContainerRef=t(h),this.templateRef=t(l),this.embeddedViewRef=null,this.authService=t(c),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.hideViewIfNotAuthenticated=f(()=>{this.authService.isAuthenticated()?this.embeddedViewRef||this.viewContainerRef.createEmbeddedView(this.templateRef):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangIsAuthenticated",""]]})}}return e})();var G=(()=>{class e{constructor(){this.viewContainerRef=t(h),this.templateRef=t(l),this.embeddedViewRef=null,this.authService=t(c),this.takeUntilDestroyed=p(),this.changeDetectorRef=t(d),this.showViewIfNotAuthenticated=f(()=>{this.authService.isAuthenticated()?(this.viewContainerRef.clear(),this.embeddedViewRef=null):this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)),this.changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=u({type:e,selectors:[["","quangIsNotAuthenticated",""]]})}}return e})();var B=()=>["test1"],$=()=>["test2"],j=()=>["test1","test2"];function J(e,A){e&1&&(o(0,"h1"),r(1,"Is Auth"),s())}function z(e,A){e&1&&(o(0,"h1"),r(1,"Is not Auth"),s())}function K(e,A){e&1&&(o(0,"h2"),r(1,"Has test1 role"),s())}function W(e,A){e&1&&(o(0,"h2"),r(1,"Has test2 role"),s())}function X(e,A){e&1&&(o(0,"h2"),r(1,"Has test1 and test2"),s())}function Y(e,A){e&1&&(o(0,"h2"),r(1,"Has test1 or test2 role"),s())}var M=(()=>{class e{constructor(){this.AuthTestComponent=e,this.quangTranslationService=t(O),this.componentsReadmePath=x(()=>this.quangTranslationService.activeLang()==="en"?"./assets/docs/auth.md":"./assets/docs/auth.it.md"),this.http=t(Q),this.authService=t(c),this.checkRole=this.authService.roles,this.user=this.authService.user}getProtectedApiResponse(){this.http.get("https://demo.duendesoftware.com/api/test").pipe(b(i=>i.find(n=>n.type==="iss").value),b(i=>`\u2601 API Success from ${i}`),S(i=>y(`\u{1F329} API Error: ${i.status} ${i.statusText}`))).subscribe(i=>{console.log(i)})}editRoles(i,n){i==="add"&&this.authService.addRoles([n]),i==="remove"&&this.authService.removeRoles([n])}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=D({type:e,selectors:[["playground-auth-test"]],decls:27,vars:13,consts:[[4,"quangIsAuthenticated"],[4,"quangIsNotAuthenticated"],[4,"quangHasAtLeastOneRole"],[4,"quangHasEveryRole"],[1,"d-flex","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"user-info"],[1,"mt-5","border-top","pt-4"],[3,"componentType","customReadmePath"]],template:function(n,a){n&1&&(k(0,J,2,0,"h1",0)(1,z,2,0,"h1",1)(2,K,2,0,"h2",2)(3,W,2,0,"h2",3)(4,X,2,0,"h2",3)(5,Y,2,0,"h2",2),o(6,"div",4)(7,"button",5),m("click",function(){return a.authService.logout()}),r(8," Logout "),s(),o(9,"button",5),m("click",function(){return a.authService.login()}),r(10," Login "),s(),o(11,"button",5),m("click",function(){return a.getProtectedApiResponse()}),r(12," Make test API call "),s(),o(13,"button",5),m("click",function(){return a.editRoles("add","test1")}),r(14," Add Test1 role "),s(),o(15,"button",5),m("click",function(){return a.editRoles("add","test2")}),r(16," Add Test2 role "),s(),o(17,"button",5),m("click",function(){return a.editRoles("remove","test1")}),r(18," Remove Test1 role "),s(),o(19,"button",5),m("click",function(){return a.editRoles("remove","test2")}),r(20," Remove Test2 role "),s()(),r(21,`
User Info:
`),o(22,"pre",6),r(23),H(24,"json"),s(),o(25,"div",7),E(26,"playground-component-documentation",8),s()),n&2&&(R(2),g("quangHasAtLeastOneRole",_(9,B)),R(),g("quangHasEveryRole",_(10,$)),R(),g("quangHasEveryRole",_(11,j)),R(),g("quangHasAtLeastOneRole",_(12,j)),R(18),V(I(24,7,a.user())),R(3),g("componentType",a.AuthTestComponent)("customReadmePath",a.componentsReadmePath()))},dependencies:[L,q,U,G,N,P,F],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return e})();var Z=[{path:"auth",component:M},{path:"**",pathMatch:"full",redirectTo:"auth"}],Le=Z;export{Le as default};
