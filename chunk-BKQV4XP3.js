import{a as p,e as g,f as u}from"./chunk-QJXW26SW.js";import{C as l}from"./chunk-ZMKI4FAZ.js";import{Ba as c,Ia as i,Ic as d,Ja as y,La as t,Yb as v,la as r,wb as f}from"./chunk-LWKGSWZA.js";var k=(()=>{class n{constructor(){this.targetComponentType=t(void 0),this.scrollCloseThreshold=i(100),this.showMethod=i("click"),this.content=i.required(),this.quangOverlayPayload=i(),this.closeOnClickOutside=!0,this.overlayPosition=i("top"),this.destroyRef=r(c),this.top=t({originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-8}),this.topLeft=t({originX:"start",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-8,offsetX:40}),this.topRight=t({originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-8,offsetX:40}),this.bottom=t({originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:8}),this.bottomLeft=t({originX:"start",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:8,offsetX:40}),this.bottomRight=t({originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:8,offsetX:40}),this.left=t({originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-8}),this.right=t({originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:8}),this.tooltipPosition=d(()=>{switch(this.overlayPosition()){case"top":return[this.top(),this.bottom()];case"top-left":return[this.topLeft(),this.bottomLeft()];case"top-right":return[this.topRight(),this.bottomRight()];case"bottom":return[this.bottom(),this.top()];case"bottom-left":return[this.bottomLeft(),this.topLeft()];case"bottom-right":return[this.bottomRight(),this.topRight()];case"left":return[this.left(),this.right()];case"right":return[this.right(),this.left()];default:return[this.top(),this.bottom()]}}),this.overlayRef=t(null),this.overlay=t(r(u)),this.overlayPositionBuilder=t(r(g)),this.elementRef=t(r(y)),this.positionStrategy=t(void 0),this.componentOverlayRef=t(null)}onClick(){this.showMethod()==="click"&&this.showHideOverlay()}onHover(){this.showMethod()==="hover"&&this.showHideOverlay()}onLeave(){this.showMethod()==="hover"&&this.detachOverlay()}attachOverlay(){let a=this.targetComponentType();if(!a)return;this.positionStrategy.set(this.overlayPositionBuilder().flexibleConnectedTo(this.elementRef()).withPositions(this.tooltipPosition())),this.overlayRef.set(this.overlay().create({positionStrategy:this.positionStrategy(),scrollStrategy:this.scrollCloseThreshold()?this.overlay().scrollStrategies.close({threshold:this.scrollCloseThreshold()}):this.overlay().scrollStrategies.noop(),hasBackdrop:this.showMethod()==="click",backdropClass:""}));let s=new p(a),o=this.overlayRef();if(o){this.componentOverlayRef.set(o.attach(s));let e=this.componentOverlayRef()?.instance;e&&(e.overlayContent=this.content,e.payload=this.quangOverlayPayload)}this.positionStrategy()?.positionChanges.pipe(l(this.destroyRef)).subscribe(e=>{let m=e,h=this.componentOverlayRef()?.instance;h&&h.positionPair.set(m.connectionPair)}),this.overlayRef()?.backdropClick().pipe(l(this.destroyRef)).subscribe(()=>{this.closeOnClickOutside&&this.detachOverlay()})}detachOverlay(){this.overlayRef()?.detach(),this.overlayRef()?.dispose()}showHideOverlay(){this.overlayRef()?.hasAttached()?this.detachOverlay():this.attachOverlay()}ngOnDestroy(){this.detachOverlay()}static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275dir=f({type:n,hostBindings:function(s,o){s&1&&v("click",function(){return o.onClick()})("mouseenter",function(){return o.onHover()})("mouseleave",function(){return o.onLeave()})},inputs:{scrollCloseThreshold:[1,"scrollCloseThreshold"],showMethod:[1,"showMethod"],content:[1,"content"],quangOverlayPayload:[1,"quangOverlayPayload"],overlayPosition:[1,"overlayPosition"]}})}}return n})();export{k as a};
