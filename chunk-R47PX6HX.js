import{d as c}from"./chunk-LLQ4LD5I.js";import{a as T}from"./chunk-44MUFFH6.js";import"./chunk-HNFAAWWJ.js";import{n as P}from"./chunk-QNWRRYJZ.js";import{h as O}from"./chunk-OMTGTXZX.js";import"./chunk-JSQMH3GC.js";import{k as I,l as L,t as F,y as R}from"./chunk-XVSGCTAE.js";import"./chunk-W4BNGQYG.js";import{Bc as H,Cc as f,Fc as C,Hc as p,I as y,Jb as A,Kb as s,Lb as r,Mb as E,Tb as d,bb as v,db as h,dc as a,ec as V,ib as m,ka as i,nb as k,pb as u,q as S,qc as w,sb as D,uc as x,vc as q,w as b}from"./chunk-TKD4T2JR.js";var U=(()=>{let e=class e{constructor(){this.logLevel=i(T,{optional:!0}),this.targetRoles=C.required({alias:"quangHasAtLeastOneRole"}),this.viewContainerRef=i(m),this.embeddedViewRef=null,this.templateRef=i(h),this.authService=i(c),this.takeUntilDestroyed=R(),this.changeDetectorRef=i(p),this.hideViewIfNotAllowed=f(()=>{this.logLevel==="verbose"&&console.debug({userRoles:this.authService.roles(),rolesToCheck:this.targetRoles()}),this.authService.hasAtLeastOneRole(this.targetRoles())?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=u({type:e,selectors:[["","quangHasAtLeastOneRole",""]],inputs:{targetRoles:[1,"quangHasAtLeastOneRole","targetRoles"]}});let t=e;return t})();var N=(()=>{let e=class e{constructor(){this.logLevel=i(T,{optional:!0}),this.targetRoles=C.required({alias:"quangHasEveryRole"}),this.viewContainerRef=i(m),this.embeddedViewRef=null,this.templateRef=i(h),this.authService=i(c),this.takeUntilDestroyed=R(),this.changeDetectorRef=i(p),this.hideViewIfNotAllowed=f(()=>{this.logLevel==="verbose"&&console.debug({userRoles:this.authService.roles(),rolesToCheck:this.targetRoles()}),this.authService.hasEveryRole(this.targetRoles())?this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=u({type:e,selectors:[["","quangHasEveryRole",""]],inputs:{targetRoles:[1,"quangHasEveryRole","targetRoles"]}});let t=e;return t})();var G=(()=>{let e=class e{constructor(){this.viewContainerRef=i(m),this.templateRef=i(h),this.embeddedViewRef=null,this.authService=i(c),this.takeUntilDestroyed=R(),this.changeDetectorRef=i(p),this.hideViewIfNotAuthenticated=f(()=>{this.authService.isAuthenticated()?this.embeddedViewRef||this.viewContainerRef.createEmbeddedView(this.templateRef):(this.viewContainerRef.clear(),this.embeddedViewRef=null),this.changeDetectorRef.markForCheck()})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=u({type:e,selectors:[["","quangIsAuthenticated",""]]});let t=e;return t})();var Q=(()=>{let e=class e{constructor(){this.viewContainerRef=i(m),this.templateRef=i(h),this.embeddedViewRef=null,this.authService=i(c),this.takeUntilDestroyed=R(),this.changeDetectorRef=i(p),this.showViewIfNotAuthenticated=f(()=>{this.authService.isAuthenticated()?(this.viewContainerRef.clear(),this.embeddedViewRef=null):this.embeddedViewRef||(this.embeddedViewRef=this.viewContainerRef.createEmbeddedView(this.templateRef)),this.changeDetectorRef.markForCheck()})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=u({type:e,selectors:[["","quangIsNotAuthenticated",""]]});let t=e;return t})();var B=()=>["test1"],$=()=>["test2"],j=()=>["test1","test2"];function J(t,e){t&1&&(s(0,"h1"),a(1,"Is Auth"),r())}function z(t,e){t&1&&(s(0,"h1"),a(1,"Is not Auth"),r())}function K(t,e){t&1&&(s(0,"h2"),a(1,"Has test1 role"),r())}function W(t,e){t&1&&(s(0,"h2"),a(1,"Has test2 role"),r())}function X(t,e){t&1&&(s(0,"h2"),a(1,"Has test1 and test2"),r())}function Y(t,e){t&1&&(s(0,"h2"),a(1,"Has test1 or test2 role"),r())}var M=(()=>{let e=class e{constructor(){this.AuthTestComponent=e,this.quangTranslationService=i(O),this.componentsReadmePath=H(()=>this.quangTranslationService.activeLang()==="en"?"./assets/docs/auth.md":"./assets/docs/auth.it.md"),this.http=i(F),this.authService=i(c),this.checkRole=this.authService.roles,this.user=this.authService.user}getProtectedApiResponse(){this.http.get("https://demo.duendesoftware.com/api/test").pipe(b(n=>n.find(o=>o.type==="iss").value),b(n=>`\u2601 API Success from ${n}`),y(n=>S(`\u{1F329} API Error: ${n.status} ${n.statusText}`))).subscribe(n=>{console.log(n)})}editRoles(n,o){n==="add"&&this.authService.addRoles([o]),n==="remove"&&this.authService.removeRoles([o])}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=k({type:e,selectors:[["playground-auth-test"]],decls:27,vars:13,consts:[[4,"quangIsAuthenticated"],[4,"quangIsNotAuthenticated"],[4,"quangHasAtLeastOneRole"],[4,"quangHasEveryRole"],[1,"d-flex","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"user-info"],[1,"mt-5","border-top","pt-4"],[3,"componentType","customReadmePath"]],template:function(o,l){o&1&&(D(0,J,2,0,"h1",0)(1,z,2,0,"h1",1)(2,K,2,0,"h2",2)(3,W,2,0,"h2",3)(4,X,2,0,"h2",3)(5,Y,2,0,"h2",2),s(6,"div",4)(7,"button",5),d("click",function(){return l.authService.logout()}),a(8," Logout "),r(),s(9,"button",5),d("click",function(){return l.authService.login()}),a(10," Login "),r(),s(11,"button",5),d("click",function(){return l.getProtectedApiResponse()}),a(12," Make test API call "),r(),s(13,"button",5),d("click",function(){return l.editRoles("add","test1")}),a(14," Add Test1 role "),r(),s(15,"button",5),d("click",function(){return l.editRoles("add","test2")}),a(16," Add Test2 role "),r(),s(17,"button",5),d("click",function(){return l.editRoles("remove","test1")}),a(18," Remove Test1 role "),r(),s(19,"button",5),d("click",function(){return l.editRoles("remove","test2")}),a(20," Remove Test2 role "),r()(),a(21,`
User Info:
`),s(22,"pre",6),a(23),x(24,"json"),r(),s(25,"div",7),E(26,"playground-component-documentation",8),r()),o&2&&(v(2),A("quangHasAtLeastOneRole",w(9,B)),v(),A("quangHasEveryRole",w(10,$)),v(),A("quangHasEveryRole",w(11,j)),v(),A("quangHasAtLeastOneRole",w(12,j)),v(18),V(q(24,7,l.user())),v(3),A("componentType",l.AuthTestComponent)("customReadmePath",l.componentsReadmePath()))},dependencies:[L,I,G,Q,U,N,P],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let t=e;return t})();var Z=[{path:"auth",component:M},{path:"**",pathMatch:"full",redirectTo:"auth"}],Le=Z;export{Le as default};
